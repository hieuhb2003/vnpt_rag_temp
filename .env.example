# =============================================================================
# RAG System Environment Configuration
# =============================================================================
# Copy this file to .env and fill in the values

# -----------------------------------------------------------------------------
# API Configuration
# -----------------------------------------------------------------------------
API_HOST=0.0.0.0
API_PORT=8000
API_WORKERS=4
DEBUG=false

# -----------------------------------------------------------------------------
# LLM Configuration
# -----------------------------------------------------------------------------
# Provider: "anthropic" or "openai"
LLM_PROVIDER=anthropic

# Anthropic API Key (required if LLM_PROVIDER=anthropic)
ANTHROPIC_API_KEY=sk-ant-api03-xxxxx

# OpenAI API Key (required if LLM_PROVIDER=openai or for embeddings)
OPENAI_API_KEY=sk-xxxxx

# Model selection
# Anthropic: claude-3-5-sonnet-20241022, claude-3-opus-20240229, claude-3-haiku-20240307
# OpenAI: gpt-4-turbo-preview, gpt-4, gpt-3.5-turbo
LLM_MODEL=claude-3-5-sonnet-20241022

# -----------------------------------------------------------------------------
# Embedding Configuration
# -----------------------------------------------------------------------------
# Provider: "openai" or "local"
EMBEDDING_PROVIDER=openai

# Model selection
# OpenAI: text-embedding-3-small, text-embedding-3-large, text-embedding-ada-002
# Local: sentence-transformers/all-MiniLM-L6-v2, BAAI/bge-base-en-v1.5
EMBEDDING_MODEL=text-embedding-3-small

# Embedding dimensions (must match model)
# text-embedding-3-small: 1536 (can reduce to 512 or 256)
# text-embedding-3-large: 3072 (can reduce)
EMBEDDING_DIMENSIONS=1536

# -----------------------------------------------------------------------------
# Qdrant Vector Database
# -----------------------------------------------------------------------------
QDRANT_HOST=qdrant
QDRANT_PORT=6333
QDRANT_API_KEY=

# -----------------------------------------------------------------------------
# PostgreSQL Database
# -----------------------------------------------------------------------------
POSTGRES_HOST=postgres
POSTGRES_PORT=5432
POSTGRES_DB=ragdb
POSTGRES_USER=raguser
POSTGRES_PASSWORD=your_secure_password_here

# -----------------------------------------------------------------------------
# Redis Cache
# -----------------------------------------------------------------------------
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=your_redis_password_here

# -----------------------------------------------------------------------------
# MinIO Object Storage
# -----------------------------------------------------------------------------
MINIO_HOST=minio
MINIO_PORT=9000
MINIO_ACCESS_KEY=minioadmin
MINIO_SECRET_KEY=your_minio_secret_here
MINIO_BUCKET=documents

# -----------------------------------------------------------------------------
# Indexing Configuration
# -----------------------------------------------------------------------------
# Chunk size in tokens (recommended: 400-512)
CHUNK_SIZE=512

# Overlap between chunks in tokens (recommended: 10-20% of chunk size)
CHUNK_OVERLAP=50

# Maximum depth for document tree structure
MAX_TREE_DEPTH=5

# -----------------------------------------------------------------------------
# Retrieval Configuration
# -----------------------------------------------------------------------------
# Hybrid search weight: 0=keyword only, 1=vector only, 0.7=balanced
HYBRID_ALPHA=0.7

# Number of results at each level
TOP_K_DOCUMENTS=5
TOP_K_SECTIONS=10
TOP_K_CHUNKS=20

# -----------------------------------------------------------------------------
# Caching Configuration
# -----------------------------------------------------------------------------
# TTL in seconds for different cache types
CACHE_EMBEDDING_TTL=3600
CACHE_RETRIEVAL_TTL=1800
CACHE_SEMANTIC_TTL=3600

# Semantic similarity threshold for cache hits (0.0-1.0)
SEMANTIC_CACHE_THRESHOLD=0.85

# -----------------------------------------------------------------------------
# Verification Configuration
# -----------------------------------------------------------------------------
# Groundedness check threshold (0.0-1.0)
GROUNDEDNESS_THRESHOLD=0.85

# Enable Tier 2 LLM verification when Tier 1 fails
ENABLE_TIER2_VERIFICATION=true

# -----------------------------------------------------------------------------
# Rate Limiting
# -----------------------------------------------------------------------------
RATE_LIMIT_REQUESTS_PER_MINUTE=60
RATE_LIMIT_BURST_SIZE=10

# -----------------------------------------------------------------------------
# Logging
# -----------------------------------------------------------------------------
LOG_LEVEL=INFO
LOG_FORMAT=json
